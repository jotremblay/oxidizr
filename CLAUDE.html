<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>CLAUDE.md • oxidizr</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="CLAUDE.md"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">oxidizr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="articles/analysis-pipeline.html">Complete Analysis Pipeline</a></li>
    <li><a class="dropdown-item" href="articles/data-quality.html">Data Validation &amp; Quality</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jotremblay/oxidizr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>CLAUDE.md</h1>
      <small class="dont-index">Source: <a href="https://github.com/jotremblay/oxidizr/blob/main/CLAUDE.md" class="external-link"><code>CLAUDE.md</code></a></small>
    </div>

<div id="claudemd" class="section level1">

<p>This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.</p>
<div class="section level2">
<h2 id="package-overview">Package Overview<a class="anchor" aria-label="anchor" href="#package-overview"></a></h2>
<p><code>oxidizr</code> is an R package for analyzing substrate oxidation during exercise using indirect calorimetry and stable isotope tracers. It calculates carbohydrate, fat, and protein oxidation rates with optional partitioning of exogenous vs endogenous carbohydrate sources using 13C isotope methods.</p>
</div>
<div class="section level2">
<h2 id="development-commands">Development Commands<a class="anchor" aria-label="anchor" href="#development-commands"></a></h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load package for development</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">load_all</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run all tests</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">test</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run a single test file</span></span>
<span><span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/test_file.html" class="external-link">test_file</a></span><span class="op">(</span><span class="st">"tests/testthat/test-oxidation.R"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check package</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">check</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Document (regenerate NAMESPACE and .Rd files)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">document</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build package</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">build</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="architecture">Architecture<a class="anchor" aria-label="anchor" href="#architecture"></a></h2>
<div class="section level3">
<h3 id="s7-class-hierarchy">S7 Class Hierarchy<a class="anchor" aria-label="anchor" href="#s7-class-hierarchy"></a></h3>
<p>The package uses S7 classes (not S4 or R6) for data management. All classes are defined in <code>R/classes.R</code>:</p>
<ul><li>
<strong>CalorimetryData</strong> - VO2, VCO2, RER measurements with configurable column mappings</li>
<li>
<strong>IsotopeData</strong> - 13C enrichment data (rexp, rexo, rref, rpla)</li>
<li>
<strong>UreaData</strong> - Sweat/urine urea concentrations for protein oxidation</li>
<li>
<strong>EnvironmentData</strong> - Temperature, humidity, pressure</li>
<li>
<strong>SubjectData</strong> - Subject characteristics and fluid balance</li>
<li>
<strong>OxidationStudy</strong> - Main container combining all data components</li>
<li>
<strong>OxidationResults</strong> - Analysis output (oxidation rates, energy contributions, partitioning)</li>
</ul></div>
<div class="section level3">
<h3 id="core-calculation-pipeline">Core Calculation Pipeline<a class="anchor" aria-label="anchor" href="#core-calculation-pipeline"></a></h3>
<ol style="list-style-type: decimal"><li>
<strong>Calorimetry</strong> (<code>R/calorimetry.R</code>): <code><a href="reference/read_calorimetry.html">read_calorimetry()</a></code> → CalorimetryData</li>
<li>
<strong>Protein oxidation</strong> (<code>R/protein.R</code>): <code><a href="reference/calc_sweat_loss.html">calc_sweat_loss()</a></code> → <code><a href="reference/calc_urea_loss.html">calc_urea_loss()</a></code> → <code><a href="reference/calc_protein_oxidation.html">calc_protein_oxidation()</a></code>
</li>
<li>
<strong>Substrate oxidation</strong> (<code>R/oxidation.R</code>): <code><a href="reference/calc_substrate_oxidation.html">calc_substrate_oxidation()</a></code> using stoichiometric equations</li>
<li>
<strong>Isotope analysis</strong> (<code>R/isotopes.R</code>): <code><a href="reference/calc_rref.html">calc_rref()</a></code> → <code><a href="reference/calc_exogenous_cho.html">calc_exogenous_cho()</a></code> → <code><a href="reference/calc_plasma_cho.html">calc_plasma_cho()</a></code>
</li>
<li>
<strong>CHO partitioning</strong> (<code>R/oxidation.R</code>): <code><a href="reference/calc_cho_partition.html">calc_cho_partition()</a></code> for exo/endo/muscle/liver sources</li>
<li>
<strong>Energy yield</strong> (<code>R/energy.R</code>): <code><a href="reference/calc_energy_yield.html">calc_energy_yield()</a></code> → <code><a href="reference/calc_energy_percent.html">calc_energy_percent()</a></code>
</li>
</ol><p>The main workflow function <code><a href="reference/analyze_oxidation.html">analyze_oxidation()</a></code> orchestrates this pipeline and returns OxidationResults.</p>
</div>
<div class="section level3">
<h3 id="key-stoichiometric-constants">Key Stoichiometric Constants<a class="anchor" aria-label="anchor" href="#key-stoichiometric-constants"></a></h3>
<p>Defined in <code>R/oxidizr-package.R</code> via <code>stoich_coefficients</code>: - CHO: 4.618 × VCO2 - 3.279 × VO2 (g/min) - Fat: -1.712 × VCO2 + 1.712 × VO2 (g/min) - CO2/CHO ratio: 0.747 L CO2 per gram CHO oxidized - Protein-urea conversion: 2.915 g protein per g urea</p>
</div>
<div class="section level3">
<h3 id="generic-methods">Generic Methods<a class="anchor" aria-label="anchor" href="#generic-methods"></a></h3>
<p>S7 generics are defined in <code>R/generics.R</code>: - <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> methods for all classes - <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> for OxidationResults - <code><a href="reference/get_data.html">get_data()</a></code> to extract underlying tibbles - <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> conversions</p>
</div>
<div class="section level3">
<h3 id="targets-integration">targets Integration<a class="anchor" aria-label="anchor" href="#targets-integration"></a></h3>
<p><code>R/targets.R</code> provides helpers for reproducible pipelines: - <code><a href="reference/tar_import_data.html">tar_import_data()</a></code> - Data import and cleaning - <code><a href="reference/tar_oxidation_analysis.html">tar_oxidation_analysis()</a></code> - Full analysis workflow - <code><a href="reference/tar_statistical_analysis.html">tar_statistical_analysis()</a></code> - Mixed ANOVAs (requires afex, emmeans) - <code><a href="reference/tar_generate_figures.html">tar_generate_figures()</a></code> - Publication figures</p>
</div>
</div>
<div class="section level2">
<h2 id="code-style">Code Style<a class="anchor" aria-label="anchor" href="#code-style"></a></h2>
<ul><li>Use tidyverse functions with native pipe <code>|&gt;</code>
</li>
<li>Use <code>.data[[col]]</code> pronoun for column references in dplyr</li>
<li>Validate S7 class inputs with <code>S7_inherits()</code>
</li>
<li>Use cli package for user messages (<code><a href="https://cli.r-lib.org/reference/cli_abort.html" class="external-link">cli::cli_abort()</a></code>, <code><a href="https://cli.r-lib.org/reference/cli_alert.html" class="external-link">cli::cli_alert_info()</a></code>)</li>
<li>Return tibbles from calculation functions</li>
<li>Ensure non-negative oxidation rates with <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax()</a></code>
</li>
</ul></div>
<div class="section level2">
<h2 id="package-maintenance-agents">Package Maintenance Agents<a class="anchor" aria-label="anchor" href="#package-maintenance-agents"></a></h2>
<p>Custom slash commands for maintaining package quality. Run with <code>/command-name</code>.</p>
<div class="section level3">
<h3 id="quality-assurance">Quality Assurance<a class="anchor" aria-label="anchor" href="#quality-assurance"></a></h3>
<table class="table"><thead><tr class="header"><th>Command</th>
<th>Purpose</th>
</tr></thead><tbody><tr class="odd"><td><code>/pkg-check</code></td>
<td>Run devtools::check() and fix issues</td>
</tr><tr class="even"><td><code>/pkg-status</code></td>
<td>Quick health check (load, tests, git status)</td>
</tr><tr class="odd"><td><code>/pkg-audit</code></td>
<td>Full audit across all quality dimensions</td>
</tr></tbody></table></div>
<div class="section level3">
<h3 id="code-quality">Code Quality<a class="anchor" aria-label="anchor" href="#code-quality"></a></h3>
<table class="table"><thead><tr class="header"><th>Command</th>
<th>Purpose</th>
</tr></thead><tbody><tr class="odd"><td><code>/pkg-lint</code></td>
<td>Code style and best practices review</td>
</tr><tr class="even"><td><code>/pkg-api</code></td>
<td>API design consistency review</td>
</tr><tr class="odd"><td><code>/pkg-perf</code></td>
<td>Performance profiling and optimization</td>
</tr></tbody></table></div>
<div class="section level3">
<h3 id="safety--dependencies">Safety &amp; Dependencies<a class="anchor" aria-label="anchor" href="#safety--dependencies"></a></h3>
<table class="table"><thead><tr class="header"><th>Command</th>
<th>Purpose</th>
</tr></thead><tbody><tr class="odd"><td><code>/pkg-security</code></td>
<td>Security vulnerability audit</td>
</tr><tr class="even"><td><code>/pkg-deps</code></td>
<td>Dependency audit and optimization</td>
</tr></tbody></table></div>
<div class="section level3">
<h3 id="documentation--testing">Documentation &amp; Testing<a class="anchor" aria-label="anchor" href="#documentation--testing"></a></h3>
<table class="table"><thead><tr class="header"><th>Command</th>
<th>Purpose</th>
</tr></thead><tbody><tr class="odd"><td><code>/pkg-docs</code></td>
<td>Documentation completeness check</td>
</tr><tr class="even"><td><code>/pkg-tests</code></td>
<td>Test coverage and quality analysis</td>
</tr></tbody></table></div>
<div class="section level3">
<h3 id="release-management">Release Management<a class="anchor" aria-label="anchor" href="#release-management"></a></h3>
<table class="table"><thead><tr class="header"><th>Command</th>
<th>Purpose</th>
</tr></thead><tbody><tr class="odd"><td><code>/pkg-cran</code></td>
<td>CRAN submission readiness check</td>
</tr><tr class="even"><td><code>/pkg-release</code></td>
<td>Prepare for version release</td>
</tr></tbody></table></div>
<div class="section level3">
<h3 id="development-workflows">Development Workflows<a class="anchor" aria-label="anchor" href="#development-workflows"></a></h3>
<table class="table"><thead><tr class="header"><th>Command</th>
<th>Purpose</th>
</tr></thead><tbody><tr class="odd"><td><code>/pkg-add-function</code></td>
<td>Add new function with proper docs/tests</td>
</tr><tr class="even"><td><code>/pkg-fix-bug</code></td>
<td>Systematic bug diagnosis and fix</td>
</tr><tr class="odd"><td><code>/pkg-refactor</code></td>
<td>Safe code refactoring protocol</td>
</tr></tbody></table></div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jonathan Tremblay.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

